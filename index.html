<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>给你的至臻爱心</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .container {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        .heart {
            width: 120px;
            height: 110px;
            position: relative;
            animation: beat 1.5s infinite, rotate 10s infinite linear;
            cursor: pointer;
        }
        .heart::before,
        .heart::after {
            content: "";
            width: 80px;
            height: 130px;
            background: linear-gradient(45deg, #ff4d4d, #ff99cc);
            border-radius: 60px 60px 0 0;
            position: absolute;
            box-shadow: 0 0 20px rgba(255, 77, 77, 0.8);
        }
        .heart::before {
            left: 60px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }
        .heart::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }
        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        @keyframes rotate {
            100% { transform: rotateY(360deg); }
        }
        .message {
            margin-top: 20px;
            font-size: 28px;
            color: #fff;
            background: linear-gradient(to right, #ff4d4d, #ff99cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transition: opacity 1s;
        }
        .message.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="container">
        <div class="heart" onclick="fetchQuote()"></div>
        <div class="message" id="message">点击爱心获取一句情话</div>
    </div>
    <audio id="bgm" loop>
        <source src="https://www.kozco.com/tech/piano2.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 粒子背景
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        function createParticle() {
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 3 + 1,
                speedX: Math.random() * 2 - 1,
                speedY: Math.random() * 2 - 1,
                color: `hsl(${Math.random() * 360}, 70%, 50%)`
            };
        }

        for (let i = 0; i < 100; i++) {
            particles.push(createParticle());
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                p.x += p.speedX;
                p.y += p.speedY;

                if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            });
            requestAnimationFrame(animate);
        }
        animate();

        // 获取随机情话
        function fetchQuote() {
            fetch('https://api.quotable.io/random?tags=love')
                .then(response => response.json())
                .then(data => {
                    const msg = document.getElementById('message');
                    msg.textContent = data.content; // 显示 API 返回的句子
                    msg.classList.add('show');
                    const audio = document.getElementById('bgm');
                    audio.play();
                })
                .catch(error => {
                    console.error('获取情话失败:', error);
                    document.getElementById('message').textContent = '爱你是我未来的唯一代码。';
                    document.getElementById('message').classList.add('show');
                });
        }

        // 页面加载时自动获取一次
        fetchQuote();
    </script>
</body>
</html>
