<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>给你的至臻爱心</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #1a1a3d, #2a2a5d);
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            position: relative;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .container {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        .heart {
            width: 200px;
            height: 200px;
            position: relative;
            animation: beat 1.5s infinite ease-in-out;
        }
        .heart svg {
            filter: drop-shadow(0 0 20px rgba(255, 77, 77, 0.8));
        }
        .heart::after {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            width: 240px;
            height: 240px;
            background: radial-gradient(circle, rgba(255, 77, 77, 0.3), transparent);
            animation: glow 2s infinite;
            z-index: -1;
        }
        .heart-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        .heart-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(255, 99, 99, 0.8);
            border-radius: 50%;
            animation: orbit 5s infinite linear;
        }
        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        @keyframes glow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        @keyframes orbit {
            0% { transform: rotate(0deg) translateX(120px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(120px) rotate(-360deg); }
        }
        .message {
            margin-top: 30px;
            font-size: 28px;
            color: #fff;
            background: linear-gradient(to right, #ff4d4d, #ff99cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(255, 77, 77, 0.5);
            opacity: 0;
            animation: fade 5s infinite;
            max-width: 80%;
            line-height: 1.5;
        }
        @keyframes fade {
            0% { opacity: 0; transform: translateY(10px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.3;
            z-index: 0;
        }
        .meteor {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), transparent);
            animation: meteor 5s infinite;
            z-index: 1;
        }
        @keyframes meteor {
            0% { transform: translateX(0) translateY(-100%); opacity: 1; }
            100% { transform: translateX(300px) translateY(100vh); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="stars"></div>
    <canvas id="canvas"></canvas>
    <div class="meteor" style="left: 20%; animation-delay: 0s;"></div>
    <div class="meteor" style="left: 50%; animation-delay: 2s;"></div>
    <div class="meteor" style="left: 80%; animation-delay: 4s;"></div>
    <div class="container">
        <div class="heart">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M100 180C110 170 120 160 130 150C140 140 150 130 160 120C170 110 180 100 180 90C180 80 170 70 160 60C150 50 140 40 130 30C120 20 110 10 100 0C90 10 80 20 70 30C60 40 50 50 40 60C30 70 20 80 20 90C20 100 30 110 40 120C50 130 60 140 70 150C80 160 90 170 100 180Z" fill="url(#grad)" stroke="#ff4d4d" stroke-width="4"/>
                <path d="M100 160C108 152 116 144 124 136C132 128 140 120 148 112C156 104 164 96 164 88C164 80 156 72 148 64C140 56 132 48 124 40C116 32 108 24 100 16C92 24 84 32 76 40C68 48 60 56 52 64C44 72 36 80 36 88C36 96 44 104 52 112C60 120 68 128 76 136C84 144 92 152 100 160Z" fill="url(#innerGrad)" opacity="0.6"/>
                <defs>
                    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff4d4d;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#ff99cc;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="innerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff99cc;stop-opacity:0.8" />
                        <stop offset="100%" style="stop-color:#ff4d4d;stop-opacity:0.5" />
                    </linearGradient>
                </defs>
            </svg>
            <div class="heart-particles">
                <div class="heart-particle" style="animation-delay: 0s;"></div>
                <div class="heart-particle" style="animation-delay: 1s;"></div>
                <div class="heart-particle" style="animation-delay: 2s;"></div>
                <div class="heart-particle" style="animation-delay: 3s;"></div>
            </div>
        </div>
        <div class="message" id="message">加载中...</div>
    </div>
    <audio id="bgm" loop autoplay>
        <source src="https://www.kozco.com/tech/piano2.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 粒子背景
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        function createParticle() {
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 3 + 1,
                speedX: Math.random() * 0.5 - 0.25,
                speedY: Math.random() * 0.5 - 0.25,
                color: `hsl(${Math.random() * 360}, 70%, 70%)`
            };
        }

        for (let i = 0; i < 200; i++) {
            particles.push(createParticle());
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                p.x += p.speedX;
                p.y += p.speedY;

                if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            });
            requestAnimationFrame(animate);
        }
        animate();

        // 情话轮播
        const quotes = [
            "你是我今生唯一的归宿。",
            "爱你是我的未来唯一代码。",
            "在亿万星河中，我只为你闪烁。",
            "你是我心动的唯一频率。",
            "未来的每一天，都想和你共享。"
        ]; // 备用情话
        let currentQuote = "加载中...";

        // 获取情话
        function fetchQuote() {
            fetch('https://api.yaohud.cn/api/randtext/twqh?key=16WXtpzYbW1h4dA7h81', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({})
            })
                .then(response => response.json())
                .then(data => {
                    if (data && data.data) {
                        currentQuote = data.data;
                    } else {
                        currentQuote = quotes[Math.floor(Math.random() * quotes.length)];
                    }
                    updateMessage();
                })
                .catch(error => {
                    console.error('获取情话失败:', error);
                    currentQuote = quotes[Math.floor(Math.random() * quotes.length)];
                    updateMessage();
                });
        }

        function updateMessage() {
            const msg = document.getElementById('message');
            msg.textContent = currentQuote;
            msg.style.animation = 'none'; // 重置动画
            setTimeout(() => {
                msg.style.animation = 'fade 5s infinite';
            }, 10);
        }

        // 每5秒更新一次
        fetchQuote();
        setInterval(fetchQuote, 5000);
    </script>
</body>
</html>
