<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>给你的至臻爱心</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .container {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        .heart {
            width: 150px;
            height: 150px;
            animation: beat 1.5s infinite;
        }
        .heart svg {
            filter: drop-shadow(0 0 15px rgba(255, 77, 77, 0.8));
        }
        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .message {
            margin-top: 20px;
            font-size: 28px;
            color: #fff;
            background: linear-gradient(to right, #ff4d4d, #ff99cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            animation: fade 5s infinite;
        }
        @keyframes fade {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="container">
        <div class="heart">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M100 180C110 170 120 160 130 150C140 140 150 130 160 120C170 110 180 100 180 90C180 80 170 70 160 60C150 50 140 40 130 30C120 20 110 10 100 0C90 10 80 20 70 30C60 40 50 50 40 60C30 70 20 80 20 90C20 100 30 110 40 120C50 130 60 140 70 150C80 160 90 170 100 180Z" fill="url(#grad)" stroke="#ff4d4d" stroke-width="4"/>
                <defs>
                    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff4d4d;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#ff99cc;stop-opacity:1" />
                    </linearGradient>
                </defs>
            </svg>
        </div>
        <div class="message" id="message"></div>
    </div>
    <audio id="bgm" loop autoplay>
        <source src="https://www.kozco.com/tech/piano2.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 粒子背景
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        function createParticle() {
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 3 + 1,
                speedX: Math.random() * 2 - 1,
                speedY: Math.random() * 2 - 1,
                color: `hsl(${Math.random() * 360}, 70%, 50%)`
            };
        }

        for (let i = 0; i < 100; i++) {
            particles.push(createParticle());
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                p.x += p.speedX;
                p.y += p.speedY;

                if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            });
            requestAnimationFrame(animate);
        }
        animate();

        // 动态轮播情话
        const quotes = [];
        let currentIndex = 0;

        // 获取情话
        function fetchQuotes() {
            fetch('https://api.quotable.io/quotes?tags=love&limit=10')
                .then(response => response.json())
                .then(data => {
                    quotes.push(...data.results.map(quote => quote.content));
                    if (quotes.length > 0) {
                        updateMessage();
                    }
                })
                .catch(error => {
                    console.error('获取情话失败:', error);
                    quotes.push('爱你是我的未来唯一代码。');
                    updateMessage();
                });
        }

        function updateMessage() {
            const msg = document.getElementById('message');
            msg.textContent = quotes[currentIndex];
            msg.style.animation = 'none'; // 重置动画
            setTimeout(() => {
                msg.style.animation = 'fade 5s infinite';
            }, 10);
            currentIndex = (currentIndex + 1) % quotes.length;
        }

        // 每5秒更新一次
        fetchQuotes();
        setInterval(() => {
            if (quotes.length > 0) {
                updateMessage();
            }
        }, 5000);
    </script>
</body>
</html>
